<!doctype html>
<html lang="fr">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>LFG.gg - Trouve ton groupe LoL</title>
    <link rel="stylesheet" href="/css/style.css" />
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800;900&display=swap" rel="stylesheet">
  </head>
  <body>
    <!-- Navbar -->
    <nav id="navbar" class="navbar">
      <div class="navbar-brand">
        <span class="logo">LFG</span><span class="logo-accent">.gg</span>
      </div>
      <div class="navbar-actions" id="navbar-actions">
        <button class="btn btn-ghost" id="btn-login">Se connecter</button>
        <button class="btn btn-primary" id="btn-register">Rejoindre</button>
      </div>
    </nav>

    <!-- Views container -->
    <main id="app">

      <!-- Landing View -->
      <section id="view-landing" class="view active">
        <div class="hero">
          <div class="hero-glow"></div>
          <div class="hero-content">
            <div class="hero-badge">Gratuit &middot; Open &middot; Francophone</div>
            <h1>Trouve ton <span class="text-gradient">groupe</span> parfait</h1>
            <p class="hero-subtitle">
              Fini les randoms toxiques. Trouve des joueurs LoL
              qui matchent ton rank, tes horaires et ton mindset.
            </p>
            <div class="hero-cta">
              <button class="btn btn-discord btn-lg" id="hero-join">
                <svg width="20" height="15" viewBox="0 0 71 55" fill="currentColor"><path d="M60.1 4.9A58.5 58.5 0 0045.4.2a.2.2 0 00-.2.1 40.8 40.8 0 00-1.8 3.7 54 54 0 00-16.2 0A37.3 37.3 0 0025.4.3a.2.2 0 00-.2-.1A58.4 58.4 0 0010.5 4.9a.2.2 0 00-.1.1A60 60 0 00.4 45a.2.2 0 00.1.2 58.7 58.7 0 0017.7 9 .2.2 0 00.3-.1 42 42 0 003.6-5.9.2.2 0 00-.1-.3 38.6 38.6 0 01-5.5-2.6.2.2 0 01 0-.4l1.1-.9a.2.2 0 01.2 0 41.9 41.9 0 0035.6 0 .2.2 0 01.2 0l1.1.9a.2.2 0 010 .3 36.3 36.3 0 01-5.5 2.7.2.2 0 00-.1.3 47.2 47.2 0 003.6 5.9.2.2 0 00.3.1A58.5 58.5 0 0070.1 45.2a.2.2 0 000-.2A59.7 59.7 0 0060.2 5a.2.2 0 00-.1 0zM23.7 36.9c-3.5 0-6.3-3.2-6.3-7.1s2.8-7.2 6.3-7.2 6.4 3.2 6.3 7.2c0 3.9-2.8 7.1-6.3 7.1zm23.2 0c-3.5 0-6.3-3.2-6.3-7.1s2.8-7.2 6.3-7.2 6.4 3.2 6.3 7.2c0 3.9-2.7 7.1-6.3 7.1z"/></svg>
                Rejoindre avec Discord
              </button>
              <button class="btn btn-ghost btn-lg" id="hero-browse">Parcourir les communautes</button>
            </div>
            <div class="hero-stats">
              <div class="stat">
                <span class="stat-number" id="stat-players">0</span>
                <span class="stat-label">Joueurs</span>
              </div>
              <div class="stat">
                <span class="stat-number">&infin;</span>
                <span class="stat-label">Ranks</span>
              </div>
              <div class="stat">
                <span class="stat-number">1</span>
                <span class="stat-label">Clic pour add</span>
              </div>
            </div>
          </div>
        </div>

        <div class="features">
          <div class="feature-card" style="--delay:0">
            <div class="feature-icon">&#9876;</div>
            <h3>Rank verifie</h3>
            <p>Ton rank est pull directement de l'API Riot. Pas de triche, pas de fake.</p>
          </div>
          <div class="feature-card" style="--delay:1">
            <div class="feature-icon">&#128268;</div>
            <h3>Filtres precis</h3>
            <p>Filtre par rank, role, horaires et style de jeu. Trouve exactement qui tu cherches.</p>
          </div>
          <div class="feature-card" style="--delay:2">
            <div class="feature-icon">&#127918;</div>
            <h3>Add en 1 clic</h3>
            <p>Connecte via Discord. Un clic pour ajouter quelqu'un en ami. Zero friction.</p>
          </div>
        </div>
      </section>

      <!-- Auth Modal -->
      <div id="modal-auth" class="modal hidden">
        <div class="modal-backdrop"></div>
        <div class="modal-content auth-discord-modal">
          <button class="modal-close" id="modal-auth-close">&times;</button>
          <div class="auth-discord-content">
            <h2>Rejoins LFG.gg</h2>
            <p class="auth-discord-subtitle">Connecte-toi avec Discord pour trouver ton groupe et etre ajoute en ami facilement.</p>
            <button class="btn btn-discord btn-block btn-lg" id="btn-discord-login">
              <svg width="20" height="15" viewBox="0 0 71 55" fill="currentColor"><path d="M60.1 4.9A58.5 58.5 0 0045.4.2a.2.2 0 00-.2.1 40.8 40.8 0 00-1.8 3.7 54 54 0 00-16.2 0A37.3 37.3 0 0025.4.3a.2.2 0 00-.2-.1A58.4 58.4 0 0010.5 4.9a.2.2 0 00-.1.1A60 60 0 00.4 45a.2.2 0 00.1.2 58.7 58.7 0 0017.7 9 .2.2 0 00.3-.1 42 42 0 003.6-5.9.2.2 0 00-.1-.3 38.6 38.6 0 01-5.5-2.6.2.2 0 01 0-.4l1.1-.9a.2.2 0 01.2 0 41.9 41.9 0 0035.6 0 .2.2 0 01.2 0l1.1.9a.2.2 0 010 .3 36.3 36.3 0 01-5.5 2.7.2.2 0 00-.1.3 47.2 47.2 0 003.6 5.9.2.2 0 00.3.1A58.5 58.5 0 0070.1 45.2a.2.2 0 000-.2A59.7 59.7 0 0060.2 5a.2.2 0 00-.1 0zM23.7 36.9c-3.5 0-6.3-3.2-6.3-7.1s2.8-7.2 6.3-7.2 6.4 3.2 6.3 7.2c0 3.9-2.8 7.1-6.3 7.1zm23.2 0c-3.5 0-6.3-3.2-6.3-7.1s2.8-7.2 6.3-7.2 6.4 3.2 6.3 7.2c0 3.9-2.7 7.1-6.3 7.1z"/></svg>
              Se connecter avec Discord
            </button>
            <p class="auth-discord-note">Inscription et connexion en un clic. Aucun mot de passe.</p>
          </div>
        </div>
      </div>

      <!-- Profile View (with Profil / Analyse tabs) -->
      <section id="view-profile" class="view hidden">
        <div class="container profile-container">

          <!-- Profile Header -->
          <div class="dashboard-header" id="dashboard-header">
            <button class="btn btn-ghost btn-back-profile hidden" id="btn-back-profile">&larr; Retour a mon profil</button>
            <div class="dashboard-identity">
              <img id="dashboard-icon" class="dashboard-avatar" src="" alt="" />
              <div>
                <h2 id="dashboard-riot-name" class="dashboard-name"></h2>
                <div class="dashboard-meta">
                  <span id="dashboard-rank" class="dashboard-rank"></span>
                  <span id="dashboard-level" class="dashboard-level"></span>
                </div>
              </div>
            </div>
          </div>

          <!-- Tabs -->
          <div class="profile-tabs">
            <button class="profile-tab active" data-tab="tab-form">Profil</button>
            <button class="profile-tab" data-tab="tab-analyse">Analyse</button>
          </div>

          <!-- TAB: Profil Form -->
          <div id="tab-form" class="profile-tab-content active">
            <form id="profile-form" class="profile-form">
              <div class="form-section">
                <h3>Identite Riot</h3>
                <div class="riot-id-row">
                  <div class="form-group flex-1">
                    <label for="riot-name">Game Name</label>
                    <input type="text" id="riot-name" placeholder="Faker" required />
                  </div>
                  <span class="riot-separator">#</span>
                  <div class="form-group" style="width: 120px">
                    <label for="riot-tag">Tag</label>
                    <input type="text" id="riot-tag" placeholder="EUW" required />
                  </div>
                  <button type="button" class="btn btn-secondary" id="btn-verify-riot">Verifier</button>
                </div>
                <div id="riot-verify-result" class="verify-result hidden"></div>
              </div>

              <div class="form-section">
                <h3>Rank</h3>
                <div class="rank-display" id="rank-display">
                  <span class="rank-placeholder">Verifie ton Riot ID pour afficher ton rank</span>
                </div>
              </div>

              <div class="form-section">
                <h3>Roles preferes</h3>
                <div class="checkbox-group roles-group">
                  <label class="chip-checkbox"><input type="checkbox" name="roles" value="TOP" /><span class="chip">TOP</span></label>
                  <label class="chip-checkbox"><input type="checkbox" name="roles" value="JUNGLE" /><span class="chip">JGL</span></label>
                  <label class="chip-checkbox"><input type="checkbox" name="roles" value="MID" /><span class="chip">MID</span></label>
                  <label class="chip-checkbox"><input type="checkbox" name="roles" value="ADC" /><span class="chip">ADC</span></label>
                  <label class="chip-checkbox"><input type="checkbox" name="roles" value="SUPPORT" /><span class="chip">SUP</span></label>
                </div>
              </div>

              <div class="form-section">
                <h3>Horaires de jeu</h3>
                <div class="checkbox-group">
                  <label class="chip-checkbox"><input type="checkbox" name="schedule" value="MATIN" /><span class="chip">Matin</span></label>
                  <label class="chip-checkbox"><input type="checkbox" name="schedule" value="APRES_MIDI" /><span class="chip">Aprem</span></label>
                  <label class="chip-checkbox"><input type="checkbox" name="schedule" value="SOIR" /><span class="chip">Soir</span></label>
                  <label class="chip-checkbox"><input type="checkbox" name="schedule" value="NUIT" /><span class="chip">Nuit</span></label>
                </div>
              </div>

              <div class="form-section">
                <h3>Style de jeu</h3>
                <div class="radio-group">
                  <label class="chip-radio"><input type="radio" name="play_style" value="tryhard" required /><span class="chip">Tryhard Ranked</span></label>
                  <label class="chip-radio"><input type="radio" name="play_style" value="chill" /><span class="chip">Chill (Normals/ARAM)</span></label>
                </div>
              </div>

              <div class="form-section">
                <h3>Discord</h3>
                <div class="discord-linked" id="discord-linked">
                  <img id="discord-avatar-preview" class="discord-avatar-lg" src="" alt="" />
                  <div class="discord-linked-info">
                    <span class="discord-linked-name" id="discord-linked-name"></span>
                    <span class="discord-linked-status">Compte Discord lie</span>
                  </div>
                </div>
              </div>

              <div class="form-section hidden" id="streamer-section">
                <h3>Abonnement Streamer</h3>

                <!-- Twitch account -->
                <div class="streamer-linked">
                  <img id="streamer-twitch-avatar" class="streamer-twitch-avatar" src="" alt="" />
                  <div class="streamer-linked-info">
                    <span class="streamer-twitch-name" id="streamer-twitch-name"></span>
                    <span class="streamer-twitch-type" id="streamer-twitch-type"></span>
                  </div>
                </div>

                <!-- Subscription details -->
                <div class="sub-details" id="sub-details">
                  <div class="sub-row">
                    <span class="sub-label">Statut</span>
                    <span class="sub-value sub-status" id="sub-status"></span>
                  </div>
                  <div class="sub-row">
                    <span class="sub-label">Serveur</span>
                    <span class="sub-value" id="sub-server-name"></span>
                  </div>
                  <div class="sub-row">
                    <span class="sub-label">Prix</span>
                    <span class="sub-value" id="sub-price"></span>
                  </div>
                  <div class="sub-row">
                    <span class="sub-label">Debut</span>
                    <span class="sub-value" id="sub-start"></span>
                  </div>
                  <div class="sub-row">
                    <span class="sub-label">Expiration</span>
                    <span class="sub-value" id="sub-expires"></span>
                  </div>
                </div>

                <!-- Actions -->
                <div class="sub-actions">
                  <a id="sub-renew-btn" class="btn btn-primary" href="#" target="_blank" rel="noopener">Renouveler</a>
                  <button class="btn btn-ghost" id="sub-edit-server-btn">Modifier le serveur</button>
                </div>

                <!-- Edit server form (hidden) -->
                <div id="sub-edit-server" class="sub-edit-server hidden">
                  <div class="form-group">
                    <label for="sub-guild-id">Guild ID</label>
                    <input type="text" id="sub-guild-id" placeholder="123456789012345678" required />
                  </div>
                  <div class="form-group">
                    <label for="sub-guild-name">Nom du serveur</label>
                    <input type="text" id="sub-guild-name" placeholder="Mon serveur Discord" required />
                  </div>
                  <div class="form-group">
                    <label for="sub-guild-icon">Icon hash (optionnel)</label>
                    <input type="text" id="sub-guild-icon" placeholder="abc123hash" />
                  </div>
                  <div class="sub-edit-actions">
                    <button class="btn btn-primary btn-sm" id="sub-save-server">Sauvegarder</button>
                    <button class="btn btn-ghost btn-sm" id="sub-cancel-server">Annuler</button>
                  </div>
                </div>

                <!-- Payment history -->
                <div class="sub-history">
                  <h4>Historique</h4>
                  <div id="sub-history-list"></div>
                </div>
              </div>

              <button type="submit" class="btn btn-primary btn-block">Sauvegarder mon profil</button>

              <div class="form-section danger-zone">
                <h3>Zone dangereuse</h3>
                <p class="danger-zone-desc">La suppression de ton compte est irreversible. Toutes tes donnees seront effacees.</p>
                <p class="danger-zone-desc danger-zone-warn hidden" id="delete-streamer-warn">
                  Tu es streamer partenaire : supprimer ton compte desactivera la licence de ton serveur. Ta communaute perdra l'acces a lezgo.gg.
                </p>
                <button type="button" class="btn btn-danger" id="btn-delete-account">Supprimer mon compte</button>
              </div>
            </form>
          </div>

          <!-- Delete Account Confirmation Modal -->
          <div id="modal-delete-account" class="modal hidden">
            <div class="modal-backdrop"></div>
            <div class="modal-content modal-delete-confirm">
              <button class="modal-close" id="modal-delete-close">&times;</button>
              <div class="delete-confirm-content">
                <div class="delete-confirm-icon">&#9888;</div>
                <h2>Supprimer ton compte ?</h2>
                <p class="delete-confirm-desc">Cette action est <strong>irreversible</strong>. Toutes tes donnees seront supprimees :</p>
                <ul class="delete-confirm-list">
                  <li>Profil et statistiques</li>
                  <li>Historique des matchs analyses</li>
                  <li>Appartenances aux serveurs</li>
                </ul>
                <p class="delete-confirm-streamer hidden" id="delete-confirm-streamer">
                  &#9888; <strong>Attention streamer :</strong> la licence de ton serveur sera desactivee. Toute ta communaute perdra l'acces a lezgo.gg immediatement.
                </p>
                <p class="delete-confirm-type">Tape <strong>SUPPRIMER</strong> pour confirmer</p>
                <input type="text" id="delete-confirm-input" class="delete-confirm-input" placeholder="SUPPRIMER" autocomplete="off" />
                <div class="delete-confirm-actions">
                  <button class="btn btn-danger btn-block" id="btn-confirm-delete" disabled>Supprimer definitivement</button>
                  <button class="btn btn-ghost btn-block" id="btn-cancel-delete">Annuler</button>
                </div>
              </div>
            </div>
          </div>

          <!-- TAB: Analyse -->
          <div id="tab-analyse" class="profile-tab-content">

            <!-- Action Bar (always visible at top) -->
            <div class="action-bar" id="action-bar">
              <div class="action-bar-left">
                <button class="btn btn-primary" id="btn-analyze">Lancer l'analyse</button>
                <button class="btn btn-secondary" id="btn-reanalyze">Re-analyser</button>
                <button class="btn btn-secondary" id="btn-find-duos">Trouver un groupe</button>
              </div>
              <div class="action-bar-right">
                <span id="last-analyzed-label" class="action-bar-info"></span>
              </div>
            </div>

            <!-- Progress bar -->
            <div id="analysis-progress" class="analysis-progress hidden">
              <div class="progress-bar">
                <div class="progress-fill" id="progress-fill"></div>
              </div>
              <span class="progress-label" id="progress-label">Chargement...</span>
            </div>

            <!-- CTA (only when no analytics yet) -->
            <div id="dashboard-cta" class="dashboard-cta">
              <h3>Analyse ton gameplay</h3>
              <p>Lance une analyse de tes 10 derniers matchs ranked pour decouvrir tes forces, faiblesses et champion pool.</p>
            </div>

            <!-- Analytics content (shown after analysis) -->
            <div id="dashboard-analytics" class="dashboard-analytics hidden">

              <!-- LP Progression Chart -->
              <div class="dashboard-section">
                <h3>Progression LP</h3>
                <div id="lp-chart-container"></div>
              </div>

              <!-- Overview stats row -->
              <div class="stats-row" id="stats-row"></div>

              <!-- Performance stats row 2 -->
              <div class="stats-row stats-row-secondary" id="stats-row-2"></div>

              <!-- Strengths & Weaknesses -->
              <div class="sw-grid">
                <div class="sw-col sw-strengths">
                  <h3>Forces</h3>
                  <ul id="strengths-list"></ul>
                </div>
                <div class="sw-col sw-weaknesses">
                  <h3>Faiblesses</h3>
                  <ul id="weaknesses-list"></ul>
                </div>
              </div>

              <!-- Playstyle Profile -->
              <div class="dashboard-section">
                <h3>Profil de jeu</h3>
                <div id="playstyle-profile"></div>
              </div>

              <!-- Champion Pool -->
              <div class="dashboard-section">
                <h3>Champion Pool</h3>
                <p class="section-desc">Clique sur un champion pour voir les details</p>
                <div class="champion-pool" id="champion-pool"></div>
              </div>

              <!-- Champion Synergies -->
              <div class="dashboard-section">
                <h3>Synergies</h3>
                <p class="section-desc">Champions qui se combinent bien avec ton pool</p>
                <div id="champion-synergies"></div>
              </div>

              <!-- Damage Composition -->
              <div class="dashboard-section">
                <h3>Composition des Degats</h3>
                <div id="damage-composition"></div>
              </div>

              <!-- Roles -->
              <div class="dashboard-section">
                <h3>Roles joues</h3>
                <div class="roles-bars" id="roles-bars"></div>
              </div>

              <!-- Early Game -->
              <div class="dashboard-section">
                <h3>Early Game</h3>
                <div id="early-game-stats"></div>
              </div>

              <!-- Tendances -->
              <div class="dashboard-section">
                <h3>Tendances</h3>
                <div class="trends-row" id="trends-row"></div>
              </div>
            </div>

            <!-- Match History (op.gg style - always visible if puuid exists) -->
            <div id="match-history-section" class="dashboard-section match-history-section hidden">
              <h3>Historique des matchs</h3>
              <div class="mh-queue-tabs" id="mh-queue-tabs">
                <button class="mh-queue-tab active" data-queue="">Tout</button>
                <button class="mh-queue-tab" data-queue="ranked">Ranked Solo</button>
                <button class="mh-queue-tab" data-queue="normal">Normal</button>
                <button class="mh-queue-tab" data-queue="tourney">Clash</button>
              </div>
              <div id="match-history-list"></div>
              <div id="match-history-loading" class="mh-loading hidden">Chargement...</div>
              <div class="mh-load-more-wrap">
                <button class="btn btn-secondary" id="btn-load-more-matches">Voir plus</button>
              </div>
            </div>

          </div>

          <!-- Champion Detail Modal -->
          <div id="modal-champion" class="modal hidden">
            <div class="modal-backdrop"></div>
            <div class="modal-content modal-champion-detail">
              <button class="modal-close" id="modal-champion-close">&times;</button>
              <div id="champion-detail-content"></div>
            </div>
          </div>
        </div>
      </section>

      <!-- Gate View (no license access) -->
      <section id="view-gate" class="view hidden">
        <div class="gate-container">
          <div class="gate-glow"></div>
          <div class="gate-content">

            <!-- Default state: no request -->
            <div id="gate-default">
              <div class="gate-icon">&#128274;</div>
              <h1>Acces reserve</h1>
              <p class="gate-subtitle">Rejoins la communaute de ton streamer pour acceder a lezgo.gg</p>
              <p class="gate-desc">Demande a ton streamer prefere de s'associer avec LFG.gg pour donner acces a sa communaute.</p>

              <div class="gate-streamer-cta">
                <p class="gate-streamer-label">Tu es streamer ?</p>
                <button class="btn btn-primary btn-lg" id="gate-become-partner">Devenir partenaire lezgo.gg</button>
              </div>
            </div>

            <!-- Request form -->
            <div id="gate-form" class="hidden">
              <div class="gate-icon">&#128640;</div>
              <h1>Devenir partenaire</h1>
              <p class="gate-subtitle">Remplis les infos de ton serveur Discord pour commencer</p>
              <form id="gate-request-form" class="gate-request-form">
                <div class="form-group">
                  <label for="gate-guild-id">Guild ID</label>
                  <input type="text" id="gate-guild-id" placeholder="123456789012345678" required />
                </div>
                <div class="form-group">
                  <label for="gate-guild-name">Nom du serveur</label>
                  <input type="text" id="gate-guild-name" placeholder="Mon serveur Discord" required />
                </div>
                <div class="form-group">
                  <label for="gate-guild-icon">Icon hash (optionnel)</label>
                  <input type="text" id="gate-guild-icon" placeholder="abc123hash" />
                </div>
                <div class="gate-form-actions">
                  <button type="submit" class="btn btn-primary btn-lg">Envoyer la demande</button>
                  <button type="button" class="btn btn-ghost" id="gate-cancel-form">Annuler</button>
                </div>
              </form>
            </div>

            <!-- Status: pending (no Twitch connected yet) -->
            <div id="gate-status-twitch" class="hidden">
              <div class="gate-icon twitch-icon">
                <svg width="48" height="48" viewBox="0 0 24 24" fill="currentColor"><path d="M11.571 4.714h1.715v5.143H11.57zm4.715 0H18v5.143h-1.714zM6 0L1.714 4.286v15.428h5.143V24l4.286-4.286h3.428L22.286 12V0zm14.571 11.143l-3.428 3.428h-3.429l-3 3v-3H6.857V1.714h13.714Z"/></svg>
              </div>
              <h1>Connecte ton Twitch</h1>
              <p class="gate-subtitle">Pour decouvrir ton offre personnalisee, connecte ton compte Twitch.</p>
              <button class="btn btn-twitch btn-lg" id="gate-twitch-connect">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor"><path d="M11.571 4.714h1.715v5.143H11.57zm4.715 0H18v5.143h-1.714zM6 0L1.714 4.286v15.428h5.143V24l4.286-4.286h3.428L22.286 12V0zm14.571 11.143l-3.428 3.428h-3.429l-3 3v-3H6.857V1.714h13.714Z"/></svg>
                Connecter Twitch
              </button>
              <p class="gate-desc">Nous utilisons tes stats pour calculer un prix adapte a ton audience.</p>
            </div>

            <!-- Status: pending (Twitch connected, price calculated) -->
            <div id="gate-status-pricing" class="hidden">
              <div class="gate-pricing-card">
                <div class="gate-twitch-profile" id="gate-twitch-profile">
                  <img id="gate-twitch-avatar" class="gate-twitch-avatar" src="" alt="" />
                  <div class="gate-twitch-info">
                    <span class="gate-twitch-name" id="gate-twitch-name"></span>
                    <span class="gate-twitch-type" id="gate-twitch-type"></span>
                  </div>
                </div>
                <div class="gate-twitch-stats">
                  <div class="gate-stat">
                    <span class="gate-stat-value" id="gate-stat-followers">-</span>
                    <span class="gate-stat-label">Followers</span>
                  </div>
                  <div class="gate-stat">
                    <span class="gate-stat-value" id="gate-stat-viewers">-</span>
                    <span class="gate-stat-label">Viewers moy.</span>
                  </div>
                </div>
                <div class="gate-price-display">
                  <span class="gate-price-label">Ton offre mensuelle</span>
                  <span class="gate-price-amount" id="gate-price-amount"></span>
                  <span class="gate-price-period">EUR / mois</span>
                </div>
                <a id="gate-paypal-link" class="btn btn-primary btn-lg btn-block" href="#" target="_blank" rel="noopener">Payer via PayPal</a>
                <p class="gate-desc">Une fois le paiement effectue, ton acces sera active sous 24h.</p>
              </div>
              <!-- Sur devis (500K+ followers) -->
              <div id="gate-sur-devis" class="gate-sur-devis hidden">
                <div class="gate-icon">&#128142;</div>
                <h1>Offre sur mesure</h1>
                <p class="gate-subtitle">Ton audience depasse 500K followers. Contacte-nous pour un devis personnalise.</p>
                <a class="btn btn-primary btn-lg" href="https://discord.gg/lezgo" target="_blank" rel="noopener">Nous contacter</a>
              </div>
            </div>

            <!-- Status: payment_received -->
            <div id="gate-status-payment" class="hidden">
              <div class="gate-icon">&#9203;</div>
              <h1>Paiement recu !</h1>
              <p class="gate-subtitle">Activation en cours...</p>
              <div class="gate-loader">
                <div class="gate-loader-bar"></div>
              </div>
              <p class="gate-desc">Ton acces sera active tres prochainement.</p>
            </div>

            <!-- Status: active -->
            <div id="gate-status-active" class="hidden">
              <div class="gate-icon">&#9989;</div>
              <h1>Ton serveur est actif !</h1>
              <p class="gate-subtitle">Ta licence est active. Ajoute le bot et accede a lezgo.gg.</p>
              <div class="gate-active-actions">
                <a id="gate-bot-invite" class="btn btn-discord btn-lg" href="#" target="_blank" rel="noopener">
                  Ajouter le bot Discord
                </a>
                <button class="btn btn-primary btn-lg" id="gate-access-app">Acceder a lezgo.gg</button>
              </div>
            </div>

            <!-- Status: rejected -->
            <div id="gate-status-rejected" class="hidden">
              <div class="gate-icon">&#10060;</div>
              <h1>Demande refusee</h1>
              <p class="gate-subtitle" id="gate-reject-reason"></p>
              <button class="btn btn-primary btn-lg" id="gate-resubmit">Resoumettre une demande</button>
            </div>

            <button class="btn btn-ghost btn-lg gate-logout-btn" id="gate-logout">Se deconnecter</button>
          </div>
        </div>
      </section>

      <!-- Onboarding View (first-time setup) -->
      <section id="view-onboarding" class="view hidden">
        <div class="onb-container">
          <div class="onb-header">
            <span class="logo">LFG</span><span class="logo-accent">.gg</span>
            <div class="onb-progress">
              <span class="onb-progress-dot current" data-step="1">1</span>
              <span class="onb-progress-line"></span>
              <span class="onb-progress-dot" data-step="2">2</span>
              <span class="onb-progress-line"></span>
              <span class="onb-progress-dot" data-step="3">3</span>
            </div>
          </div>

          <!-- Step 1: Link Riot ID -->
          <div id="onb-step-1" class="onb-step">
            <h2>Lie ton compte Riot</h2>
            <p class="onb-step-desc">Verifie ton identite LoL pour debloquer toutes les fonctionnalites.</p>
            <div class="onb-riot-row">
              <div class="form-group flex-1">
                <label for="onb-riot-name">Game Name</label>
                <input type="text" id="onb-riot-name" placeholder="Faker" />
              </div>
              <span class="riot-separator">#</span>
              <div class="form-group" style="width: 120px">
                <label for="onb-riot-tag">Tag</label>
                <input type="text" id="onb-riot-tag" placeholder="EUW" />
              </div>
              <button type="button" class="btn btn-secondary" id="onb-verify-riot">Verifier</button>
            </div>
            <div id="onb-verify-result" class="onb-verify-result hidden"></div>
            <div class="onb-actions">
              <button class="btn btn-primary btn-lg" id="onb-next-1" disabled>Suivant</button>
            </div>
          </div>

          <!-- Step 2: Complete profile -->
          <div id="onb-step-2" class="onb-step hidden">
            <h2>Complete ton profil</h2>
            <p class="onb-step-desc">Ces infos aident a te matcher avec les bons joueurs.</p>

            <div class="form-section">
              <h3>Roles preferes</h3>
              <div class="checkbox-group roles-group">
                <label class="chip-checkbox"><input type="checkbox" name="onb-roles" value="TOP" /><span class="chip">TOP</span></label>
                <label class="chip-checkbox"><input type="checkbox" name="onb-roles" value="JUNGLE" /><span class="chip">JGL</span></label>
                <label class="chip-checkbox"><input type="checkbox" name="onb-roles" value="MID" /><span class="chip">MID</span></label>
                <label class="chip-checkbox"><input type="checkbox" name="onb-roles" value="ADC" /><span class="chip">ADC</span></label>
                <label class="chip-checkbox"><input type="checkbox" name="onb-roles" value="SUPPORT" /><span class="chip">SUP</span></label>
              </div>
            </div>

            <div class="form-section">
              <h3>Horaires de jeu</h3>
              <div class="checkbox-group">
                <label class="chip-checkbox"><input type="checkbox" name="onb-schedule" value="MATIN" /><span class="chip">Matin</span></label>
                <label class="chip-checkbox"><input type="checkbox" name="onb-schedule" value="APRES_MIDI" /><span class="chip">Aprem</span></label>
                <label class="chip-checkbox"><input type="checkbox" name="onb-schedule" value="SOIR" /><span class="chip">Soir</span></label>
                <label class="chip-checkbox"><input type="checkbox" name="onb-schedule" value="NUIT" /><span class="chip">Nuit</span></label>
              </div>
            </div>

            <div class="form-section">
              <h3>Style de jeu</h3>
              <div class="radio-group">
                <label class="chip-radio"><input type="radio" name="onb-play-style" value="tryhard" /><span class="chip">Tryhard Ranked</span></label>
                <label class="chip-radio"><input type="radio" name="onb-play-style" value="chill" /><span class="chip">Chill (Normals/ARAM)</span></label>
              </div>
            </div>

            <div class="onb-actions">
              <button class="btn btn-primary btn-lg" id="onb-next-2">Suivant</button>
            </div>
          </div>

          <!-- Step 3: Profile ready -->
          <div id="onb-step-3" class="onb-step hidden">
            <h2>Ton profil est pret !</h2>
            <p class="onb-step-desc">Voici un resume de ton profil.</p>

            <div class="onb-summary-card">
              <img id="onb-summary-avatar" class="onb-summary-avatar" src="" alt="" />
              <div class="onb-summary-info">
                <span class="onb-summary-name" id="onb-summary-name"></span>
                <span class="onb-summary-riot" id="onb-summary-riot"></span>
                <span class="onb-summary-rank" id="onb-summary-rank"></span>
                <span class="onb-summary-roles" id="onb-summary-roles"></span>
              </div>
            </div>

            <div class="onb-analysis-status" id="onb-analysis-status">Analyse en cours...</div>

            <div class="onb-actions">
              <button class="btn btn-primary btn-lg" id="onb-finish">Decouvrir ma communaute</button>
            </div>
          </div>
        </div>
      </section>

      <!-- Admin View -->
      <section id="view-admin" class="view hidden">
        <div class="container admin-container">
          <div class="admin-header">
            <h2>Admin Dashboard</h2>
            <p class="admin-subtitle">Gestion des licences et serveurs</p>
          </div>

          <!-- Stats -->
          <div class="admin-stats" id="admin-stats">
            <div class="admin-stat-card"><span class="admin-stat-value">-</span><span class="admin-stat-label">Chargement...</span></div>
          </div>

          <!-- Requests Section -->
          <div class="admin-requests-section">
            <div class="admin-requests-header">
              <h3>Demandes en attente <span class="admin-requests-badge" id="admin-requests-count"></span></h3>
            </div>
            <div class="admin-requests-list" id="admin-requests-list">
              <p class="admin-loading">Chargement...</p>
            </div>
          </div>

          <!-- Filters -->
          <div class="admin-filters">
            <button class="admin-filter-tab active" data-filter="all">Tous</button>
            <button class="admin-filter-tab" data-filter="licensed">Licencies</button>
            <button class="admin-filter-tab" data-filter="unlicensed">Non-licencies</button>
            <button class="btn btn-secondary btn-sm" id="admin-toggle-add-server">+ Ajouter serveur</button>
          </div>

          <!-- Add server form (hidden) -->
          <div id="admin-add-server-container" class="admin-add-server hidden">
            <form id="admin-add-server-form">
              <div class="admin-add-row">
                <div class="form-group flex-1">
                  <label for="admin-add-guild-id">Guild ID</label>
                  <input type="text" id="admin-add-guild-id" placeholder="123456789012345678" required />
                </div>
                <div class="form-group flex-1">
                  <label for="admin-add-guild-name">Nom du serveur</label>
                  <input type="text" id="admin-add-guild-name" placeholder="Mon serveur" required />
                </div>
                <div class="form-group flex-1">
                  <label for="admin-add-guild-icon">Icon URL (optionnel)</label>
                  <input type="text" id="admin-add-guild-icon" placeholder="abc123hash" />
                </div>
                <button type="submit" class="btn btn-primary btn-sm">Ajouter</button>
              </div>
            </form>
          </div>

          <!-- Servers table -->
          <div class="admin-table-wrap">
            <table class="admin-table">
              <thead>
                <tr>
                  <th>Serveur</th>
                  <th>Guild ID</th>
                  <th>Membres</th>
                  <th>Licence</th>
                  <th>Label</th>
                  <th>Prix</th>
                  <th>Expiration</th>
                  <th>Actions</th>
                </tr>
              </thead>
              <tbody id="admin-servers-tbody">
                <tr><td colspan="8" class="admin-loading">Chargement...</td></tr>
              </tbody>
            </table>
          </div>
        </div>
      </section>

      <!-- Browse View -->
      <section id="view-browse" class="view hidden">

        <!-- Sub-view 1: Server list -->
        <div id="browse-servers">
          <div class="browse-servers-header">
            <h2>Communautes</h2>
            <p class="browse-servers-subtitle">Rejoins la communaute de ton streamer ou serveur Discord prefere</p>
          </div>
          <div class="servers-grid" id="servers-grid">
            <div class="loading-state">Chargement des communautes...</div>
          </div>
        </div>

        <!-- Sub-view 2: Server detail (hidden by default) -->
        <div id="browse-server-detail" class="hidden">
          <div class="server-header">
            <div class="server-header-left">
              <button class="btn btn-ghost btn-sm" id="btn-back-servers">&larr; Communautes</button>
              <div class="server-identity">
                <img id="server-detail-icon" class="server-icon-lg" src="" alt="" />
                <div>
                  <h2 id="server-detail-name"></h2>
                </div>
              </div>
            </div>
            <div class="server-header-right">
              <button class="btn btn-primary" id="btn-join-server">Rejoindre</button>
              <button class="btn btn-secondary hidden" id="btn-leave-server">Quitter</button>
            </div>
          </div>

          <!-- LFG Section -->
          <div class="lfg-section">
            <div class="lfg-header">
              <h3>Looking for Group</h3>
              <button class="btn btn-primary btn-sm hidden" id="btn-create-lfg">+ Chercher un groupe</button>
            </div>

            <!-- LFG creation form (hidden) -->
            <div id="lfg-form-container" class="lfg-form-container hidden">
              <form id="lfg-form">
                <div class="lfg-form-row">
                  <div class="form-group" style="flex:1">
                    <label for="lfg-role">Role recherche</label>
                    <select id="lfg-role">
                      <option value="">Peu importe</option>
                      <option value="TOP">TOP</option>
                      <option value="JUNGLE">JGL</option>
                      <option value="MID">MID</option>
                      <option value="ADC">ADC</option>
                      <option value="SUPPORT">SUP</option>
                    </select>
                  </div>
                  <div class="form-group" style="flex:2">
                    <label for="lfg-note">Note (optionnel)</label>
                    <input type="text" id="lfg-note" placeholder="Ex: Gold+ chill normals ce soir" maxlength="200" />
                  </div>
                </div>
                <div class="lfg-form-actions">
                  <button type="submit" class="btn btn-primary btn-sm">Publier</button>
                  <button type="button" class="btn btn-ghost btn-sm" id="btn-cancel-lfg">Annuler</button>
                </div>
              </form>
            </div>

            <div id="lfg-posts-list"></div>
          </div>

        </div>

      </section>

      <!-- Player Detail Modal -->
      <div id="modal-player" class="modal hidden">
        <div class="modal-backdrop"></div>
        <div class="modal-content modal-player-detail">
          <button class="modal-close" id="modal-player-close">&times;</button>
          <div id="player-detail-content"></div>
        </div>
      </div>

    </main>

    <script type="module" src="/js/main.js"></script>
  </body>
</html>
